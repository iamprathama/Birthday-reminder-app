<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body class="ds">
    <div class="container">
   
<!-- 
  {% if today_birthdays %}
<div class="birthday-notification">
    <h3>🎉 Today's Birthdays 🎉</h3>
    <ul>
        {% for birthday in today_birthdays %}
        <li class="st">
            <span class="name">{{ birthday.name }}</span> -
            <span class="relation">{{ birthday.relationship }}</span>
        </li>
        {% endfor %}
    </ul>
</div>
{% else %}
<p>No birthdays today.</p>
{% endif %} -->
<!-- Notification Bell with Dropdown -->
<!-- Notification Bell Icon with Dropdown -->
<div class="dropdown" style="position: relative; display: inline-block; margin-right: 20px;">
  <button class="btn btn-light dropdown-toggle" type="button" id="notificationDropdown" data-bs-toggle="dropdown" aria-expanded="false">
    🔔 Notifications
    {% if today_birthdays %}
      <span class="badge bg-danger">{{ today_birthdays|length }}</span>
    {% endif %}
  </button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notificationDropdown" style="max-height: 300px; overflow-y: auto;">
    {% if today_birthdays %}
      {% for b in today_birthdays %}
        <li><a class="dropdown-item" href="#">🎂 {{ b.name }} has a birthday today!</a></li>
      {% endfor %}
    {% else %}
      <li><a class="dropdown-item" href="#">No birthday reminders today.</a></li>
    {% endif %}
  </ul>
</div>
<br>
<br>

        {% if birthdays %}
        <div class="birthday-list">
            {% for b in birthdays %}
            
            <div class="card">
                <h3>{{ b.name}}</h3>
                <p>Date:{{b.date}} </p>
                <p>Relation:{{b.relationship}}</p>
                <div class="card-actions">
      
        <a href="{{ url_for('delete_birthday', id=b.id) }}" class="delete-btn" onclick="return confirm('Are you sure you want to delete this birthday?')">🗑️ Delete</a>
    </div>
            </div>
              {% endfor %}
        </div>
        {% else %}
        <p style="text-align:center;">No birthdays saved yet. Add some! 🎉</p>
    {% endif %}
    <a href="{{ url_for('add_birthday') }}" class="add-btn">➕ Add Birthday</a>

   
    <div class="logout">
      <a href="{{ url_for('logout') }}">🚪 Logout</a>
    </div>
    </div>
  
{% if today_birthdays %}
<audio id="birthdaySound" autoplay>
    <source src="{{ url_for('static', filename='birthday.mp3') }}" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>
<script>
    // Re-trigger sound (optional fallback)
    window.onload = () => {
        const sound = document.getElementById('birthdaySound');
        if (sound) sound.play().catch(e => console.log('Autoplay blocked'));
    };
</script>
{% endif %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>